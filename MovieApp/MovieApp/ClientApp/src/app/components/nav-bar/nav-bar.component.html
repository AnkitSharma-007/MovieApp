<mat-toolbar color="primary" class="mat-elevation-z4">
  <mat-toolbar-row>
    <div class="brand-title">
      <a mat-flat-button color="primary" [routerLink]="['/']">
        <mat-icon>movie</mat-icon>
        <span>Movie App</span>
      </a>
    </div>
    <div>
      <app-search></app-search>
    </div>
    <div class="d-flex align-items-center">
      @if (userState$ | async; as userState) { @if (userState.isAuthenticated) {
      <button
        mat-icon-button
        matTooltip="Watchlist"
        [routerLink]="['/watchlist']"
      >
        <mat-icon
          matBadge="{{ watchlistItemcount$ | async }}"
          matBadgeColor="warn"
          >queue</mat-icon
        >
      </button>
      } @if (!userState.isAuthenticated) {
      <a
        mat-flat-button
        color="primary"
        [routerLink]="['/login']"
        matTooltip="Login button"
      >
        Login
      </a>
      } @if (userState.user?.userTypeName == userType.Admin) {
      <a
        mat-flat-button
        color="primary"
        [routerLink]="['/admin/movies']"
        matTooltip="Admin panel"
      >
        Admin Panel
      </a>
      } @if (userState.isAuthenticated) {
      <a mat-flat-button color="primary" [matMenuTriggerFor]="menu">
        <mat-icon>arrow_drop_down</mat-icon>
        <span> {{ userState.user?.username }}</span>
      </a>
      <mat-menu #menu="matMenu" xPosition="before">
        <button mat-menu-item (click)="logout()">Logout</button>
      </mat-menu>
      } }

      <a
        mat-flat-button
        color="primary"
        href="/swagger/index.html"
        target="_blank"
        matTooltip="API details"
      >
        <span
          ><img
            class="swagger-icon"
            src="https://static1.smartbear.co/swagger/media/assets/swagger_fav.png"
        /></span>
        Swagger
      </a>
      <a
        mat-flat-button
        color="primary"
        href="https://github.com/AnkitSharma-007/MovieApp"
        target="_blank"
        matTooltip="GitHub link"
        ><i class="fa-brands fa-github"></i> GitHub</a
      >
    </div>
  </mat-toolbar-row>
</mat-toolbar>
